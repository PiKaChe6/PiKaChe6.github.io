<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="郭宇祥的博客">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        C++Primer第五章笔记 - PiKaChe&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 总得留下些什么吧 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>皮卡车</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#语句"><span class="toc-text">语句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#简单语句"><span class="toc-text">简单语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#空语句"><span class="toc-text">空语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#复合语句"><span class="toc-text">复合语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#语句作用阈"><span class="toc-text">语句作用阈</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#例子"><span class="toc-text">例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#条件语句"><span class="toc-text">条件语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#if语句"><span class="toc-text">if语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#悬垂else"><span class="toc-text">悬垂else</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#switch语句"><span class="toc-text">switch语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#switch内部控制流"><span class="toc-text">switch内部控制流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#default标签"><span class="toc-text">default标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#switch内部的变量定义"><span class="toc-text">switch内部的变量定义</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#迭代语句"><span class="toc-text">迭代语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#while语句"><span class="toc-text">while语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#使用情景"><span class="toc-text">使用情景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#传统的for语句"><span class="toc-text">传统的for语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#for语句头中的多重定义"><span class="toc-text">for语句头中的多重定义</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#范围for语句"><span class="toc-text">范围for语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#例子-1"><span class="toc-text">例子</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#do-while语句"><span class="toc-text">do while语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#跳转语句"><span class="toc-text">跳转语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#break语句"><span class="toc-text">break语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#continue语句"><span class="toc-text">continue语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#goto语句"><span class="toc-text">goto语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#try语句块和异常处理"><span class="toc-text">try语句块和异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#throw表达式"><span class="toc-text">throw表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#try语句块"><span class="toc-text">try语句块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写处理代码"><span class="toc-text">编写处理代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数在寻找处理代码的过程中退出"><span class="toc-text">函数在寻找处理代码的过程中退出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#标准异常"><span class="toc-text">标准异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#例子-2"><span class="toc-text">例子</span></a></li></ol></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> 总得留下些什么吧 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        C++Primer第五章笔记
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2020-07-12 20:33:09</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#C++" title="C++">C++</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h1 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h1><ul>
<li>简单语句</li>
<li>语句作用阈</li>
<li>条件语句</li>
<li>迭代语句</li>
<li>跳转语句</li>
<li>try语句块和异常处理<h2 id="简单语句"><a href="#简单语句" class="headerlink" title="简单语句"></a>简单语句</h2><h3 id="空语句"><a href="#空语句" class="headerlink" title="空语句"></a>空语句</h3>如果在程序的某个地方，语法上需要一条语句但是逻辑上不需要，此时使用空语句。感觉像是python中的pass。一种常见的情况是，当循环的全部工作在条件部分就可以完成时，我们通常会用到空语句。例如，我们想要读取输入流的内容知道遇到一个特定值为止，除此之外什么事情也不做：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;s &amp;&amp; s!= sought)<span class="comment">//重复读入数据直至到达文件末尾或某次输入的等于sought</span></span><br><span class="line">;<span class="comment">//空语句</span></span><br></pre></td></tr></table></figure>
<h3 id="复合语句"><a href="#复合语句" class="headerlink" title="复合语句"></a>复合语句</h3>复合语句是指用花括号括起来的语句和声明序列，复合语句也被称作块（block）。<br>例如我们常常要在循环体中做很多事情，此时就要把多条语句用花括号括起来，从而把语句序列转变成块。<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (val &lt;= <span class="number">10</span>)&#123;</span><br><span class="line">	sum += val;</span><br><span class="line">	++val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="语句作用阈"><a href="#语句作用阈" class="headerlink" title="语句作用阈"></a>语句作用阈</h2>可以在if、switch、while和for语句的控制结构内定义变量。定义在控制结构当中的变量只在相应语句的内部可见，一旦语句结束，变量也就超出其作用范围了：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="keyword">int</span> i = get_num()) <span class="comment">//每次迭代是创建并初始化i</span></span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">i = <span class="number">0</span>; <span class="comment">//错误：在循环外部无法访问i</span></span><br></pre></td></tr></table></figure>
如果其他代码也需要访问控制变量，则变量必须定义在语句的外部<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> beg = v.<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">while</span>(beg != v.<span class="built_in">end</span>() &amp;&amp; *beg &gt;=<span class="number">0</span>)</span><br><span class="line">	++beg;</span><br><span class="line"><span class="keyword">if</span> (beg == v.<span class="built_in">end</span>())</span><br></pre></td></tr></table></figure>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="built_in">string</span>::iterator iter != s.<span class="built_in">end</span>())&#123;...&#125;</span><br></pre></td></tr></table></figure>
是错误的，因为iter是刚刚定义的对于string的迭代器，还没有被初始化，上面的代码直接把为初始化的迭代器与s.end()比较会发生错误。<br>正确写法<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>::iterator iter = s.<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">while</span> (iter != s.<span class="built_in">end</span>())&#123;...&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h2></li>
<li>if语句：根据条件决定控制流</li>
<li>switch语句，计算一个整型表达式的值，然后根据这个值从几条执行路径中选择一条<h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3>条件不管是表达式还是变量，其类型都必须能转化成布尔类型<h4 id="悬垂else"><a href="#悬垂else" class="headerlink" title="悬垂else"></a>悬垂else</h4>当代码中的if分支多于else分支时，C++规定else与离它最近的尚未匹配的if匹配。或者最好使用花括号。<h3 id="switch语句"><a href="#switch语句" class="headerlink" title="switch语句"></a>switch语句</h3>switch语句提供了一条便利的途径使得我们能够在若干个固定选项中作出选择。举个例子，假如我们想统计五个元音字母在文本中出现的次数，程序逻辑应该如下所示：</li>
<li>从输入的内容中读取所有字符</li>
<li>令每个字符都与原因字母的集合比较</li>
<li>如果字符与某个元音字母匹配，将该字母数量加1.</li>
<li>显示结果<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> aCnt = <span class="number">0</span>, eCnt = <span class="number">0</span>, iCnt = <span class="number">0</span>, oCnt = <span class="number">0</span>, uCnt = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> ch;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; ch)&#123;</span><br><span class="line"><span class="keyword">switch</span>(ch)&#123;</span><br><span class="line">	<span class="keyword">case</span><span class="number">'</span>a<span class="number">'</span>:</span><br><span class="line">		++aCnt;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	Case<span class="number">'e'</span>:</span><br><span class="line">		++eCnt;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span><span class="number">'</span>i<span class="number">'</span>:</span><br><span class="line">		++iCnt;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span><span class="number">'</span>o<span class="number">'</span>:</span><br><span class="line">		++oCnt;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span><span class="number">'u</span><span class="number">'</span>:</span><br><span class="line">		++uCnt;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">		</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
switch语句首先对括号里的表达式求值，该表达式跟在关键字switch的后面，可以是一个初始化的变量声明。如果switch语句的表达式和所有case都没有匹配上，将直接跳转到switch结构之后的第一条语句。<br>case关键字和它对应的值一起被称为case标签。<strong>case标签必须是整型常量表达式,不能是变量！</strong><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> ch = getVal();</span><br><span class="line"><span class="keyword">int</span> ival = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">switch</span>(ch)&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">3.14</span>: <span class="comment">//错误：case标签不是一个整数</span></span><br><span class="line">	<span class="keyword">case</span> ival: <span class="comment">//错误：case标签不是一个常量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="switch内部控制流"><a href="#switch内部控制流" class="headerlink" title="switch内部控制流"></a>switch内部控制流</h4>如果某个case标签匹配成功，将从该标签开始往后顺序执行所有case分支，除非程序显式地中断了这一过程，否则直到switch的结尾处才会停下来。要想避免执行后续case分支的代码，我们必须显示地告诉编译器终止执行过程。大多数情况下，在下一个case标签之前应该有一个break语句。</li>
</ul>
<p>然而，也有一些时候默认的switch行为才是程序真正需要的。每个case标签只能对应一个值，但是有些时候我们希望两个或更多个值共享同一组操作。此时我们就故意省略掉break语句，使得程序能够连续执行若干个case标签。<br>比如想要统计所有元音字母出现的总次数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> vowelCnt = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">switch</span>(ch)&#123;<span class="comment">// 出现了a,e,i,o,u中的任意一个都会将vowelCnt的值加1</span></span><br><span class="line">	<span class="keyword">case</span><span class="number">'</span>a<span class="number">'</span>:</span><br><span class="line">	<span class="keyword">case</span><span class="number">'e'</span>:</span><br><span class="line">	<span class="keyword">case</span><span class="number">'</span>i<span class="number">'</span>:</span><br><span class="line">	<span class="keyword">case</span><span class="number">'</span>o<span class="number">'</span>:</span><br><span class="line">	<span class="keyword">case</span><span class="number">'u</span><span class="number">'</span>:</span><br><span class="line">		++vowelCnt;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>为例安全起见，最好在最后一个标签的后面也加上break；</strong></p>
<h4 id="default标签"><a href="#default标签" class="headerlink" title="default标签"></a>default标签</h4><p>如果没有任何一个case标签能匹配上switch表达式的值，程序将执行紧更在default标签后面的语句。例如，可以增加一个计数值来统计非元音字母的数量，只要在default分支内不断递增名为otherCnt的变量就可以了：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(ch)&#123;</span><br><span class="line">	<span class="keyword">case</span><span class="number">'</span>a<span class="number">'</span>: <span class="keyword">case</span><span class="number">'e'</span>: <span class="keyword">case</span><span class="number">'</span>i<span class="number">'</span>: <span class="keyword">case</span><span class="number">'</span>o<span class="number">'</span>: <span class="keyword">case</span><span class="number">'u</span><span class="number">'</span>:</span><br><span class="line">	++vowelCnt;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">	++otherCnt;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="switch内部的变量定义"><a href="#switch内部的变量定义" class="headerlink" title="switch内部的变量定义"></a>switch内部的变量定义</h4><p>如果程序跳转到了某个特定的case，则switch结构中该case标签之前的部分会被忽略掉。这种忽略掉一部分特定代码的行为引出了一个有趣的问题：如果被忽略过的代码中含有变量的定义该怎么办？</p>
<p>答案是：如果在某一个带有初值的变量位于作用域之外，在另一处该变量位于作用域之内，则从前一处跳转到后一处的行为是非法的。</p>
<p>使程序能够统计含有以下两个字符的字符序列的数量：ff、fl和fi。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;   <span class="keyword">unsigned</span> ffCnt =<span class="number">0</span>, flCnt = <span class="number">0</span>, fiCnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> c, before = <span class="string">'\0'</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Pls typ a short text: "</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span>.<span class="built_in">get</span>(c))&#123;</span><br><span class="line">        <span class="keyword">if</span> (before == <span class="string">'f'</span>)</span><br><span class="line">        &#123;<span class="keyword">switch</span> (c)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'f'</span>:</span><br><span class="line">            ffCnt++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'l'</span>:</span><br><span class="line">            flCnt++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'i'</span>:</span><br><span class="line">            fiCnt++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        before = c;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt; <span class="string">"The text contain "</span>&lt;&lt;ffCnt&lt;&lt;<span class="string">" ff"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt; <span class="string">"The text contain "</span>&lt;&lt;flCnt&lt;&lt;<span class="string">" fl"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt; <span class="string">"The text contain "</span>&lt;&lt;fiCnt&lt;&lt;<span class="string">" fi"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="迭代语句"><a href="#迭代语句" class="headerlink" title="迭代语句"></a>迭代语句</h2><h3 id="while语句"><a href="#while语句" class="headerlink" title="while语句"></a>while语句</h3><p>定义在while条件部分或者while循环体内的变量每次迭代都经历从创建到销毁的过程。</p>
<h4 id="使用情景"><a href="#使用情景" class="headerlink" title="使用情景"></a>使用情景</h4><ul>
<li>不确定到底要迭代多少次</li>
<li>我们想在循环结束后访问循环控制变量<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line"><span class="keyword">int</span> i; </span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;i)</span><br><span class="line">	v.push_back(i); <span class="comment">//v.push_back(t)	向尾端添加一个值为t的元素</span></span><br><span class="line"><span class="comment">//寻找第一个负值</span></span><br><span class="line"><span class="keyword">auto</span> beg = v.<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">while</span> (beg != v.<span class="built_in">end</span>() &amp;&amp; *beg&gt;=<span class="number">0</span>)</span><br><span class="line">	++beg;</span><br><span class="line"><span class="keyword">if</span>(beg == v.<span class="built_in">end</span>())</span><br></pre></td></tr></table></figure>
<h3 id="传统的for语句"><a href="#传统的for语句" class="headerlink" title="传统的for语句"></a>传统的for语句</h3>for(init-statement; condition; expression)<br>  statement<br>for语句中定义的对象只在for循环体内可见。<h4 id="for语句头中的多重定义"><a href="#for语句头中的多重定义" class="headerlink" title="for语句头中的多重定义"></a>for语句头中的多重定义</h4>和其他声明一样，init-statement也可以定义<strong>多个对象</strong>。但是init-statement只能有<strong>一条声明语句，</strong>因此，所有变量的基础类型必须相同。比如，下面的循环把vector的元素拷贝一份添加到原来的元素后面：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">decltype</span>(v.<span class="built_in">size</span>()) i =<span class="number">0</span>, sz = v.<span class="built_in">size</span>(); i !=sz; ++i)</span><br><span class="line">	v.push_back(v[i]);</span><br></pre></td></tr></table></figure>
<h3 id="范围for语句"><a href="#范围for语句" class="headerlink" title="范围for语句"></a>范围for语句</h3>for (declaration: expression)<br>  statement</li>
</ul>
<p>expression表示的必须是一个序列，比如用花括号括起来的初始值列表、数组或者vector或string等类型的对象，这些类型的共同特点是拥有能返回迭代器的begin和end成员。</p>
<p>declaration定义一个变量，序列中的每个元素都能得到转换成该变量的类型。确保类型相容最简单的办法是使用auto类型说明符。<strong>如果需要对序列中的元素执行写操作，循环变量必须声明成引用类型。</strong></p>
<h4 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h4><p>把vector对象中的每个元素都翻倍：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v = &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> &amp;r : v) <span class="comment">//范围变量必须是引用类型，这样才能对元素执行写操作</span></span><br><span class="line">	r *= <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>不能通过范围for语句增加vector对象的元素。在范围for语句中预存了end（）的值。一旦在序列中添加（删除）元素，end函数的值就可能变得无效了。</p>
<h3 id="do-while语句"><a href="#do-while语句" class="headerlink" title="do while语句"></a>do while语句</h3><p>do<br>    statement<br>while(condition);<br>和while的区别是，do while不管条件的值如何，我们都至少执行一次循环。</p>
<h2 id="跳转语句"><a href="#跳转语句" class="headerlink" title="跳转语句"></a>跳转语句</h2><ul>
<li>break</li>
<li>continue</li>
<li>goto</li>
<li>return</li>
</ul>
<h3 id="break语句"><a href="#break语句" class="headerlink" title="break语句"></a>break语句</h3><p>break语句负责终止离他最近的while、do while、 for或者switch语句，并从这些语句之后的第一条语句开始继续执行。</p>
<h3 id="continue语句"><a href="#continue语句" class="headerlink" title="continue语句"></a>continue语句</h3><p>continue语句终止最近的循环中的当前迭代并立即开启下一次迭代。continue语句只能出现在for、while和do while循环内部，或者嵌套在此类循环里的语句或块的内部。</p>
<ul>
<li>和break语句类似的是，出现在嵌套循环中的continue语句也仅作用于离它最近的循环。</li>
<li>和break不同的是，只有当switch语句嵌套在迭代语句内部时，才能在switch里使用continue。</li>
</ul>
<p>例如，下面的程序每次从标准输入中读取一个单词。循环只对那些以下划线开头的单词感兴趣，<strong>其他情况下，我们直接终止当前的迭代并获取下一个单词。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> buf;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;buf &amp;&amp; !buf.empty())&#123;</span><br><span class="line"><span class="keyword">if</span> (buf[<span class="number">0</span>] != <span class="string">'_'</span>) <span class="comment">//注意⚠️ 这里是不等于</span></span><br><span class="line">	<span class="keyword">continue</span>; <span class="comment">//接着读取下一个输入</span></span><br><span class="line"><span class="comment">//程序执行到了这里，说明当前输入是以下划线开始的；接着处理buf</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="goto语句"><a href="#goto语句" class="headerlink" title="goto语句"></a>goto语句</h3><p>goto语句的作用是从goto语句无条件跳转到同一函数的另一条语句。<br><strong>不要在程序中使用goto语句，因为它使得程序既难以理解又很难修改</strong><br>goto语句的语法形式是<br>    goto label；<br>其中，label是用于标识一条语句的标识符。带标签语句是一种特殊的语句，在它之前有一个标识符以及一个冒号：<br>    end: return; //带标签语句，可以作为goto的目标<br>标签标示符独立于变量或者其他标识符的名字，因此，标签标识符可以和程序中的其他实体的标识符使用同一个名字而不会相互干扰。goto语句和控制权转向的那条带标签的语句必须位于同一个函数之内。</p>
<h2 id="try语句块和异常处理"><a href="#try语句块和异常处理" class="headerlink" title="try语句块和异常处理"></a>try语句块和异常处理</h2><p>异常处理：</p>
<ul>
<li>throw表达式，异常检测部分使用throw表达式来表示它遇到了无法处理的问题。我们说throw引发了异常。</li>
<li>try语句块，异常处理部分使用try语句块处理异常。try语句块以关键字try开始，并以一个或多个catch子句结束。try语句块中代码抛出的异常通常会被某个catch子句处理。因为catch子句处理异常，所以他们也常被称作异常处理代码。</li>
<li>一套异常类，用于在throw表达式和相关的catch子句之间传递异常的具体信息。</li>
</ul>
<h3 id="throw表达式"><a href="#throw表达式" class="headerlink" title="throw表达式"></a>throw表达式</h3><p>程序的异常检测部分使用throw表达式引发一个异常。throw表达式包含关键字throw和紧随其后的一个表达式，其表达式的类型就是抛出的异常类型。throw表达式后面通常紧跟一个分号，从而构成一条表达式语句。</p>
<p>比如之前程序检查读入的记录是否是关于同一种书籍的。在真实的程序中，应该把对象相加的代码和用户交互的代码分离出来。此例中，我们改写程序使得检查完成后不再直接输出一条信息，而是<strong>抛出一条异常：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(item.isbn()!=item2.isbn())</span><br><span class="line">	<span class="keyword">throw</span> runtime_errow(<span class="string">"Data must be refer to same ISBN"</span>)</span><br><span class="line"><span class="comment">// 如果程序执行到了这里，表示两个ISBN是相同的</span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;item1 + item2&lt;&lt;<span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>

<p>在这段代码中，如果ISBN不一样就抛出一个异常，该异常是类型runtime_error的对象。抛出异常将终止当前的函数，并把控制权转移给处理该异常的代码。</p>
<p>类型runtime_error是标准库异常的一种，定义在stdexcept头文件中。我们必须初始化runtime_error的对象，方式是给它提供一个string对象或者一个c风格的字符串，这个字符串中有一些关于异常的辅助信息。</p>
<h3 id="try语句块"><a href="#try语句块" class="headerlink" title="try语句块"></a>try语句块</h3><p>try语句块的通用语法形式是</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">		programm-statements</span><br><span class="line">&#125; <span class="keyword">catch</span> (exception-declaration)&#123;</span><br><span class="line">	handler-statements</span><br><span class="line">&#125;<span class="keyword">catch</span> (exception-declaration)&#123;</span><br><span class="line">	handler-statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>try语句块的一开始的关键字是try，随后紧跟着一个块。<br>跟在try块之后的是一个或多个catch子句。catch子句包括三部分：关键字catch、括号内一个（可能未命名的）对象的声明（称作<strong>异常声明</strong>，exception declaration）以及一个块。当选中了某个catch子句处理了异常之后，执行与之对应的块。catch一旦完成，程序跳转到try语句块最后一个catch子句之后的那条语句继续执行。<br>try语句块中的programm-statements组成程序的正常逻辑，像其他任何块一样，programm-statesments可以有包括声明在内的任意c++语句。一如既往，try语句块内声明的变量在块外无法访问，特别在catch子句内也无法访问。</p>
<h3 id="编写处理代码"><a href="#编写处理代码" class="headerlink" title="编写处理代码"></a>编写处理代码</h3><p>假设执行Sales_item对象加法的代码是与用户交互的代码分离开来的。其中与用户交互的代码负责处理发生的异常。它的形式可能如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;item1&gt;&gt;item2)&#123;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">			<span class="comment">//执行添加两个Sales_items对象的代码</span></span><br><span class="line">			<span class="comment">//如果添加失败，代码抛出一个runtime_error的异常</span></span><br><span class="line">	&#125; <span class="keyword">catch</span>(runtime_error err)&#123;</span><br><span class="line">		<span class="comment">//提醒用户两个ISBN必须一致，询问是否重新输入</span></span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt;err.what()</span><br><span class="line">					&lt;&lt;<span class="string">"\nTry Again? Enter y or n"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">			<span class="keyword">char</span> c;</span><br><span class="line">			<span class="built_in">cin</span>&gt;&gt;c;</span><br><span class="line">			<span class="keyword">if</span> (!<span class="built_in">cin</span>||c == <span class="string">'n'</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>程序本来要执行的任务出现在try语句块中，这是因为这段代码可能会抛出一个runtime_error类型的异常。</p>
<p>try语句块对应一个catch子句，该子句负责处理类型为runtime_error的异常。如果try语句块的代码抛出了runtime_error异常，接下来执行catch块内的语句。</p>
<p><code>err.what()</code>what是runtime_error类的一个成员函数。每个标准库异常类都定义了名为what的成员函数，这些函数没有参数，返回值是c风格字符串（即const char*）。其中，runtime_error的what成员返回的是初始化一个具体对象时所用的string对象的副本。如果上一节编写的代码抛出异常，则本节的catch子句输出</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Data must refer to same ISBN</span><br><span class="line">Try Again? Enter y <span class="keyword">or</span> n</span><br></pre></td></tr></table></figure>

<h3 id="函数在寻找处理代码的过程中退出"><a href="#函数在寻找处理代码的过程中退出" class="headerlink" title="函数在寻找处理代码的过程中退出"></a>函数在寻找处理代码的过程中退出</h3><p>在复杂系统中，程序在遇到抛出的异常代码前，其执行路径可能已经经过了多个try语句块。例如，一个try语句块可能调用了包含另一个语句块的函数，新的try语句块可能调用了包含又一个try语句块的新函数，以此类推。</p>
<p>寻找处理代码的过程与函数调用链刚好相反。</p>
<ol>
<li>当异常被抛出时，首先搜索抛出该异常的函数。</li>
<li>如果没有找到匹配的catch子句，终止该函数，并在调用该函数的函数中继续寻找。</li>
<li>如果还没有找到匹配catch子句，这个新的函数也被终止，继续搜索调用它的函数。</li>
<li>以此类推，沿着程序的执行路径逐层回退，直到找到适当类型的catch子句为止。</li>
<li>如果最终还没有找到任何匹配的catch子句，程序转到名为terminate的标准库函数。该函数的行为与系统有关，一般情况下，执行该函数将导致程序非正常退出。</li>
</ol>
<h3 id="标准异常"><a href="#标准异常" class="headerlink" title="标准异常"></a>标准异常</h3><p>c++标准库定义了一组类，用于报告标准库函数遇到的问题，这些异常类也可以在用户编写的程序中使用，它们分别定义在4个头文件中：</p>
<ul>
<li>exception头文件定义了最通用的异常类exception。它只报告异常的发生，不提供任何额外信息。</li>
<li>stdexcept头文件定义了几种常用的异常类，在下表中列出</li>
<li>new头文件定义了bad_alloc异常类型</li>
<li>type_info头文件定义了bad_cast异常类型</li>
</ul>
<table>
<thead>
<tr>
<th>异常类</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>exception</td>
<td>最常见的问题</td>
</tr>
<tr>
<td>runtim_error</td>
<td>只有在运行时才能检测出问题</td>
</tr>
<tr>
<td>range_error</td>
<td>运行时错误：生成的结果超出了有意义的值域范围</td>
</tr>
<tr>
<td>overflow_error</td>
<td>运行时错误：计算上溢</td>
</tr>
<tr>
<td>underflow_error</td>
<td>运行时错误：计算下溢</td>
</tr>
<tr>
<td>logic_error</td>
<td>程序逻辑错误</td>
</tr>
<tr>
<td>domain_error</td>
<td>逻辑错误：参数对应的结果值不存在</td>
</tr>
<tr>
<td>invald_argument</td>
<td>逻辑错误：无效参数</td>
</tr>
<tr>
<td>length_error</td>
<td>逻辑错误：试图创建一个超出该类型最大长度的对象</td>
</tr>
<tr>
<td>out_of_range</td>
<td>逻辑错误：使用一个超出有效范围的值</td>
</tr>
</tbody></table>
<p>我们只能以默认初始化的方式初始化exception、bad_alloc和bad_cast对象，不允许为这些对象提供初始值。</p>
<p>其他异常类型的行为则恰好相反：应该使用string对象或者c风格字符串初始化这些类型的对象，但不允许使用默认初始化的方式。当创建此类对象时，必须提供初始值，该初始值含有错误相关的信息。</p>
<p>异常类型只定义了what的成员函数，该函数没有任何参数，返回值是一个指向c风格字符串的const char*。该字符串的目的是提供关于异常的一些文本信息。</p>
<p>what函数返回的c风格字符串的内容与异常对象的类型有关。如果异常类型有一个字符串初始值，则what返回该字符串。对于其无初始值的异常类来说，what返回的内容由编译器决定。</p>
<h3 id="例子-2"><a href="#例子-2" class="headerlink" title="例子"></a>例子</h3><p>从标准读取两个整数，输出第一个数除以第二个数，如果第二个数是0抛出异常，在用try语句块去捕获异常。catch子句应该为用户输出一条信息，询问其是否重新输入并执行try语句块的内容</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i1,i2;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Pls enter 2 integer values: "</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;i1&gt;&gt;i2)&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (i2 == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">throw</span> runtime_error(<span class="string">"The denominator can't be 0."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;(i1/i2)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span>(runtime_error err)&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;err.what()&lt;&lt;<span class="string">"\nTry Again? Enter y or no"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">char</span> c;</span><br><span class="line">            <span class="built_in">cin</span>&gt;&gt;c;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">'n'</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud" target="_blank" rel="noopener">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


    <script>
        /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
        */
        if( '' || '')
        var disqus_config = function () {
            this.page.url = '';  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };

        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://pikache.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>



</html>
